{% extends 'base.html.twig' %}

{% block body %}
<div class="content">
    <div class="middle-content">
        {% if app.request.query.has('sync') %}
            <div class="alert_success">Successfully logged in. Your starred repo will soon be synced. You can grab your RSS link in the top menu!</div>
        {% endif %}

        <h2 class="content-head is-center">Your starred repos</h2>

        {% if repos is empty %}
            <p><i>Here are some sample display.</i></p>
        {% endif %}

        <table class="pure-table">
            <thead>
                <tr>
                    <th>Repository</th>
                    <th>Last&nbsp;version</th>
                    <th>Published&nbsp;at</th>
                </tr>
            </thead>

            <tbody>
                {% for repo in repos -%}
                    <tr{% if loop.index is odd %} class="pure-table-odd"{% endif %}>
                        <td>
                            <img class="repo-avatar" src="{{ repo.ownerAvatar }}&amp;s=25"/>
                            <a href="https://github.com/{{ repo.fullName }}">{{ repo.fullName }}</a>
                        </td>
                        <td>
                            {% if repo.name -%}
                                {{ repo.name }} (<a href="{{ repo|link_to_version }}">{{ repo.tagName }}</a>)
                            {%- else -%}
                                <a href="{{ repo|link_to_version }}">{{ repo.tagName }}</a>
                            {%- endif %}

                            {% if repo.prerelease -%}
                                <span class="label_prerelease">pre-release</span>
                            {% endif -%}
                        </td>
                        <td><time datetime="{{ repo.createdAt|date("c") }}" title="{{ repo.createdAt|date("c") }}">{{ repo.createdAt|time_diff }}</time></td>
                    </tr>
                {% else %}
                    <tr>
                        <td>
                            <img class="repo-avatar" src="https://avatars2.githubusercontent.com/u/5909549?v=3&amp;s=25"/>
                            <a href="#">sample/sample</a>
                        </td>
                        <td>First release (<a href="#">v1.0.0</a>)</td>
                        <td><time datetime="{{ app.user.createdAt|date("c") }}" title="{{ app.user.createdAt|date("c") }}">{{ app.user.createdAt|time_diff }}</time></td>
                    </tr>
                    <tr>
                        <td>
                            <img class="repo-avatar" src="https://avatars2.githubusercontent.com/u/5909549?v=3&amp;s=25"/>
                            <a href="#">sample/sample</a>
                        </td>
                        <td>
                            Prepare first release (<a href="#">v1.0.0-alpha.1</a>)
                            <span class="label_prerelease">pre-release</span>
                        </td>
                        <td><time datetime="{{ date("-2days")|date("c") }}" title="{{ date("-2days")|date("c") }}">{{ date("-2days")|time_diff }}</time></td>
                    </tr>
                {% endfor -%}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}
